# 縄張りシステム vs 主観的境界システム 比較分析

## 現在の実装状況

### ✅ 既に実装済み
- **従来型縄張りシステム** (`TerritoryInfo`)
- **主観的境界システム** (`SubjectiveBoundary`)
- 両システムは `TerritoryProcessor` 内で統合実装済み

## システム比較

### 1. 従来型縄張りシステム
```python
@dataclass
class TerritoryInfo:
    territory_id: str
    center: Tuple[float, float]  # 物理的中心座標
    radius: float               # 固定的な半径
    owner_npc: str             # 単一オーナー
    members: Set[str]          # メンバーリスト
    territorial_strength: float # 縄張り強度
```

#### 特徴：
- 🎯 **客観的境界**: 明確な中心と半径による物理的領域
- 🏰 **所有権ベース**: 特定の個体が領域を"所有"
- 📍 **位置固定**: 地理的座標に基づく固定的境界
- 👥 **メンバーシップ**: 明確な内部/外部の区別

#### 利点：
- ✅ 直感的で理解しやすい
- ✅ 実装が比較的単純
- ✅ 物理的リソース管理に適している
- ✅ 集団形成の可視化が容易

#### 制限：
- ❌ 硬直的な境界設定
- ❌ 個体差を表現しにくい
- ❌ 状況依存の境界変化が困難
- ❌ 心理的・社会的要素の表現が限定的

### 2. 主観的境界システム
```python
@dataclass
class SubjectiveBoundary:
    npc_id: str
    inner_objects: Set[str]      # 内側として認識するオブジェクト
    outer_objects: Set[str]      # 外側として認識するオブジェクト
    boundary_strength: Dict[str, float]  # オブジェクト毎の境界強度
```

#### 特徴：
- 🧠 **主観的認知**: 各NPCが個別に境界を認識
- 🔄 **動的境界**: 経験により境界が学習・変化
- 🎭 **オブジェクト指向**: 人・物・場所それぞれに境界強度
- 📊 **段階的強度**: -1.0〜1.0の連続的な境界強度

#### 利点：
- ✅ **個性表現**: NPCごとの異なる境界認識
- ✅ **学習能力**: 経験による境界の自然な変化
- ✅ **柔軟性**: 状況や関係性に応じた動的調整
- ✅ **心理的リアリズム**: 実際の人間の認知に近い

#### 制限：
- ❌ 複雑性が高い
- ❌ 計算コストが増大
- ❌ デバッグ・可視化が困難
- ❌ バランス調整が複雑

## 村ライフシミュレーションでの適用分析

### 現在の活用状況
デモ出力から確認される実際の動作：
```
🏘️ T0: アキラ 縄張り評価開始 - 価値:1.17
🏘️ アキラ 安全感:0.173 閾値:0.3
```

### 推奨システム選択

#### **短期的 (現状維持): 従来型縄張りシステム**
理由：
- ✅ 既に安定動作している
- ✅ 村の物理的領域管理に適している
- ✅ 建設・資源管理との統合が容易
- ✅ デバッグと調整が比較的簡単

#### **長期的 (段階導入): 主観的境界システム**
理由：
- 🎯 **より自然なNPC行動**: 個体差のある境界認識
- 🎯 **学習要素の強化**: 経験による成長表現
- 🎯 **社会関係の深化**: 関係性に基づく動的境界
- 🎯 **意味圧システムとの統合**: SSD理論との整合性

## 統合アプローチの提案

### フェーズ1: 現システム最適化
1. 現在の縄張りシステムのパフォーマンス向上
2. 縄張り評価ロジックの調整
3. デバッグ情報の充実

### フェーズ2: 主観的境界要素の段階導入
1. **社会関係への適用**
   ```python
   # 例: 信頼関係の主観的境界
   trust_boundary = boundary.get_boundary_strength(target_npc)
   cooperation_likelihood = sigmoid(trust_boundary)
   ```

2. **作業領域の個人化**
   ```python
   # 例: 作業場所の主観的親しみやすさ
   workplace_comfort = boundary.get_boundary_strength(workplace_id)
   work_efficiency_modifier = 1.0 + (workplace_comfort * 0.2)
   ```

### フェーズ3: 完全統合
- 物理的縄張り（従来型）+ 心理的境界（主観型）のハイブリッド
- NPCごとの境界スタイル設定（保守的 vs 適応的）
- 集団学習による境界の共有・伝播

## 実装推奨度

### 🥇 第1優先: 現システム安定化
- 既存縄張りシステムの最適化
- パフォーマンス改善
- エラーハンドリング強化

### 🥈 第2優先: 主観的境界の限定導入
- 社会関係システムでのテスト導入
- 信頼度計算での活用
- 作業効率への影響実験

### 🥉 第3優先: 完全移行検討
- 全システム統合後の動作検証
- パフォーマンス影響評価
- ユーザビリティテスト

## 結論

**現時点では従来型縄張りシステムの継続使用を推奨**

理由：
1. ✅ 既に安定動作している
2. ✅ 村ライフシミュレーションに適している
3. ✅ 開発リスクが低い
4. ✅ 主観的境界システムは段階的に導入可能

**将来的な主観的境界システム導入は価値が高い**が、現在の完成度と安定性を優先し、段階的なアプローチを推奨する。